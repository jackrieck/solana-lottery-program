# no-loss-lottery

Solana Riptide Hackathon

## test

```bash
anchor test
```

## prompt

No-loss lottery: Build a platform for users to deposit a variety of tokens into a pool and then connect the pool to a Solana lending protocol which aggregates funds and rewards the interest to a winner over a period of time.

## lottery flow

- users choose 6 numbers, creates PDA numbers and vault pubkey as seed
- users calls `buy` adds in their PDA, receives ticket
- cranks call `draw`, draw selects 6 random numbers and sets these in vault manager config. `draw` locks `buy` until dispense is called
- cranks call `dispense`, pass in PDA derived from winning numbers generated by `draw`
- if winning numbers PDA passed to `dispense` is an already initialized account, send the prize to the owner
- if winning numbers PDA passed to `dispense` is not initialized, unlock buy, zero out winning numbers, no error

## swap flow

- crank calls `swap`, tokens from `vault` are swapped to interest bearing token and sent to `yield_vault`

## redeem swap flow

- user calls `redeem`, if not enough tokens in `vault` swap amount from `yield_vault` to `vault` and transfer to user

### TODO

- VRF to pick a random winning ticket
- draw cadence instead of draw time
- stake
- emit event if no winner for the front end
- soteria
- github actions
